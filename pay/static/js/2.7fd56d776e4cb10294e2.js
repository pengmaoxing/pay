webpackJsonp([2],{"3cXf":function(t,e,i){t.exports={default:i("VWiu"),__esModule:!0}},VWiu:function(t,e,i){var n=i("DH3n"),s=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}},dsCX:function(t,e){},fewi:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("3cXf"),s=i.n(n),r=i("CJJO"),a=(i("4LH3"),{data:function(){return{htmlProportion:"",htmlWidth:"",htmlheight:"",isWxPay:!0,yenSymbol:"¥",payMoney:"",actualPayment:"",discountPrice:"",openId:"",userId:"",storeId:"",price:"",timeStamp:"",orderNumber:"",merchantName:"",testProcess:"",testMoney:"",testRes:"",testFail:"",testData:""}},created:function(){var t=this;this.htmlWidth=document.documentElement.clientWidth||document.body.clientWidth,this.htmlheight=document.documentElement.clientHeight||document.body.clientHeight,this.htmlProportion=this.htmlWidth/750;var e=this.$route.query.paymentMoney;null!=e&&""!=e&&e&&(this.payMoney=e);var i=this.$route.query.discountPrice;null!=i&&""!=i&&i&&(this.discountPrice=i);var n=this.$route.query.openId;null!=n&&""!=n&&n&&(this.openId=n);var s=this.$route.query.userId;null!=s&&""!=s&&s&&(this.userId=s);var a=this.$route.query.storeId;null!=a&&""!=a&&a&&(this.storeId=a);var o=this.$route.query.memberId;null!=o&&""!=o&&o&&(this.memberId=o);var c=this.$route.query.code;null!=c&&""!=c&&c&&(this.code=c);var d=sessionStorage.getItem("merchantId");null!=d&&""!=d&&d&&(this.merchantId=d),console.log(this.payMoney,this.discountPrice,this.openId,this.userId,this.storeId,this.memberId,this.code,this.merchantId),Object(r.f)(this.userId).then(function(e){console.log(e),t.merchantName=e.obj}).catch(function(t){console.log(t)}),null!=this.discountPrice&&""!=this.discountPrice&&this.discountPrice?this.actualPayment=(this.payMoney-this.discountPrice).toFixed(2):this.actualPayment=this.payMoney},methods:{payment:function(){var t=this;Object(r.g)(1,this.payMoney,this.userId,this.openId,this.storeId,this.discountPrice,this.memberId,this.code,this.merchantId).then(function(e){switch(console.log(e),t.testRes=s()(e),parseInt(e.obj.openWay)){case 1:window.location.href=e.obj.payUrl;break;case 2:t.wxPay(e.obj.jsPayResponse),t.price=t.payMoney-t.discountPrice,t.timeStamp=e.obj.jsPayResponse.timeStamp,t.orderNumber=e.obj.jsPayResponse.orderNumber}}).catch(function(t){console.log(t)})},wxPay:function(t){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",onBridgeReady,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",onBridgeReady),document.attachEvent("onWeixinJSBridgeReady",onBridgeReady)):(this.onBridgeReady(t),this.testData=t)},onBridgeReady:function(t){var e=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.pkg,signType:t.signType,paySign:t.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg&&(console.log("支付成功"),e.$router.push({path:"/advertisement",query:{userId:e.userId,storeId:e.storeId,merchantId:e.merchantId,price:e.price,timeStamp:e.timeStamp,orderNumber:e.orderNumber}})),"get_brand_wcpay_request:cancel"==t.err_msg&&alert("支付取消"),"get_brand_wcpay_request:fail"==t.err_msg&&(alert("支付失败"),alert(s()(t))),"total_fee"==t.err_msg&&alert("缺少参数")})}}}),o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[null!=t.merchantName&&""!=t.merchantName?i("div",{staticClass:"title-head",style:{height:150*t.htmlProportion+"px"}},[t._v(t._s(t.merchantName?t.merchantName:""))]):t._e(),t._v(" "),i("div",{staticClass:"lf-pay-panel",style:{height:300*t.htmlProportion+"px"}},[i("div",[t._m(0),t._v(" "),i("div",{staticClass:"two"},[i("span",{staticClass:"text-llg"},[t._v(t._s(t.yenSymbol)+" "+t._s(t.actualPayment))])]),t._v(" "),t._m(1)])]),t._v(" "),i("div",{staticClass:"lf-pay-btn",style:{height:200*t.htmlProportion+"px"}},[i("div",{on:{click:t.payment}},[i("span",{staticClass:"text-lg"},[t._v("付 款")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"one"},[e("span",{staticClass:"text-sm"},[this._v("请向收银员询问应付金额")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"three"},[e("input",{staticClass:"text-grey",attrs:{type:"text",placeholder:"添加备注(20个字以内)"}})])}]};var c=i("C7Lr")(a,o,!1,function(t){i("dsCX")},null,null);e.default=c.exports}});